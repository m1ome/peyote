#!/usr/bin/env node

const pprint = require('../src/pprint');
const chalk = require('chalk');
const args = process.argv;

function prettyPrint(data) {
    const result = pprint(data);

    if (result === null) {
        console.log(chalk.red('Error: ') + chalk.black('unknown type of source'));
    } else {
        if (result.length > 0) {
            console.log(result.join('\n'));
        }
    }
}

if (args.length < 3) {
    process.stdin.resume();
    process.stdin.setEncoding('utf8');
    process.stdin.on('data', function (data) {
        prettyPrint(data);
    });
} else {
    const data = args[2];
    prettyPrint(data);
}
